<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>AIOXPHERE â€” A fÃ¡brica de execuÃ§Ã£o de Aiox</title>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;900&family=Space+Mono:wght@400;700&display=swap" rel="stylesheet" />
  <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
  <style>
    *, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }

    :root {
      --bg:        #020814;
      --bg2:       #050d1a;
      --text:      #e2e8f0;
      --muted:     #64748b;
      --border:    rgba(0,212,255,0.12);

      /* Zonas de Genialidade */
      --z1: #ef4444;  /* Estrategista   */
      --z2: #f97316;  /* Criativo       */
      --z3: #eab308;  /* Comunicador    */
      --z4: #22c55e;  /* Construtor     */
      --z5: #3b82f6;  /* Analista       */
      --z6: #a855f7;  /* VisionÃ¡rio     */
      --z7: #ec4899;  /* Conector       */
      --z8: #06b6d4;  /* Executor       */
    }

    html { scroll-behavior: smooth; }
    body {
      font-family: 'Inter', sans-serif;
      background: var(--bg);
      color: var(--text);
      overflow-x: hidden;
      min-height: 100vh;
    }

    /* â”€â”€ Hex grid background â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
    body::before {
      content: '';
      position: fixed; inset: 0; z-index: 0; pointer-events: none;
      background-image:
        url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='60' height='104'%3E%3Cpath d='M30 2 L58 18 L58 50 L30 66 L2 50 L2 18 Z' fill='none' stroke='rgba(0,212,255,0.06)' stroke-width='1'/%3E%3Cpath d='M30 68 L58 84 L58 104' fill='none' stroke='rgba(0,212,255,0.06)' stroke-width='1'/%3E%3Cpath d='M30 68 L2 84 L2 104' fill='none' stroke='rgba(0,212,255,0.06)' stroke-width='1'/%3E%3C/svg%3E");
      background-size: 60px 104px;
      opacity: 1;
    }

    /* â”€â”€ Prismatic orbs â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
    .orbs { position: fixed; inset: 0; pointer-events: none; z-index: 0; }
    .orb {
      position: absolute; border-radius: 50%;
      filter: blur(140px); opacity: 0.12;
      animation: drift 18s ease-in-out infinite;
    }
    .orb-1 { width:500px;height:500px; background:var(--z6); top:-150px;  left:-100px;  animation-delay:0s;  }
    .orb-2 { width:400px;height:400px; background:var(--z8); top:40%;     right:-80px;  animation-delay:6s;  }
    .orb-3 { width:350px;height:350px; background:var(--z4); bottom:-80px;left:30%;     animation-delay:12s; }
    .orb-4 { width:300px;height:300px; background:var(--z2); top:20%;     left:40%;     animation-delay:3s;  }
    @keyframes drift {
      0%,100% { transform: translateY(0) scale(1); }
      50%      { transform: translateY(-35px) scale(1.08); }
    }

    /* â”€â”€ Boot screen â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
    #boot {
      position: fixed; inset: 0; z-index: 9999;
      background: var(--bg);
      display: flex; flex-direction: column;
      align-items: center; justify-content: center; gap: 12px;
      transition: opacity 0.8s ease;
    }
    #boot.fade { opacity: 0; pointer-events: none; }
    .boot-logo {
      font-family: 'Space Mono', monospace;
      font-size: clamp(1rem, 3vw, 1.4rem);
      font-weight: 700; letter-spacing: 4px;
      background: linear-gradient(90deg, var(--z8), var(--z6), var(--z7));
      -webkit-background-clip: text; -webkit-text-fill-color: transparent;
      margin-bottom: 24px;
    }
    .boot-line {
      font-family: 'Space Mono', monospace;
      font-size: 0.75rem; color: var(--z8);
      opacity: 0; transform: translateX(-10px);
      transition: opacity 0.3s, transform 0.3s;
    }
    .boot-line.on { opacity: 1; transform: translateX(0); }
    .boot-bar {
      width: 280px; height: 2px;
      background: rgba(0,212,255,0.15);
      border-radius: 99px; margin-top: 20px; overflow: hidden;
    }
    .boot-progress {
      height: 100%; width: 0%;
      background: linear-gradient(90deg, var(--z8), var(--z6));
      border-radius: 99px;
      transition: width 1.8s ease;
    }

    /* â”€â”€ Layout â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
    .container { max-width: 960px; margin: 0 auto; padding: 0 24px; position: relative; z-index: 1; }

    /* â”€â”€ HUD bracket helper â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
    .hud {
      position: relative;
    }
    .hud::before, .hud::after {
      content: '';
      position: absolute;
      width: 14px; height: 14px;
      border-color: var(--z8);
      border-style: solid;
      opacity: 0.5;
      transition: opacity 0.3s, width 0.3s, height 0.3s;
    }
    .hud::before { top: -4px; left: -4px; border-width: 2px 0 0 2px; }
    .hud::after  { bottom: -4px; right: -4px; border-width: 0 2px 2px 0; }
    .hud:hover::before, .hud:hover::after { opacity: 1; width: 20px; height: 20px; }

    /* â”€â”€ Nav â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
    nav {
      padding: 28px 0;
      display: flex; align-items: center; justify-content: space-between;
    }
    .logo {
      font-family: 'Space Mono', monospace;
      font-size: 0.85rem; font-weight: 700; letter-spacing: 3px;
      background: linear-gradient(90deg, var(--z8), var(--z6));
      -webkit-background-clip: text; -webkit-text-fill-color: transparent;
    }
    .sys-status {
      display: flex; align-items: center; gap: 8px;
      font-family: 'Space Mono', monospace;
      font-size: 0.68rem; color: var(--z4);
      border: 1px solid rgba(34,197,94,0.25);
      background: rgba(34,197,94,0.06);
      border-radius: 4px; padding: 5px 12px;
      letter-spacing: 1px;
    }
    .status-dot { width: 6px; height: 6px; border-radius: 50%; background: var(--z4); animation: blink 1.5s infinite; }
    @keyframes blink { 0%,100%{opacity:1} 50%{opacity:0.2} }

    /* â”€â”€ Hero â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
    .hero { text-align: center; padding: 72px 0 56px; position: relative; }

    .hero-scan {
      position: absolute; left: 0; right: 0; top: 0; height: 2px;
      background: linear-gradient(90deg, transparent, var(--z8), transparent);
      animation: scan 4s ease-in-out infinite;
      opacity: 0.4;
    }
    @keyframes scan {
      0%   { top: 0%;   opacity: 0; }
      10%  { opacity: 0.4; }
      90%  { opacity: 0.4; }
      100% { top: 100%; opacity: 0; }
    }

    .hero-tag {
      font-family: 'Space Mono', monospace;
      font-size: 0.7rem; letter-spacing: 3px; text-transform: uppercase;
      color: var(--z8); margin-bottom: 24px;
      display: inline-flex; align-items: center; gap: 8px;
    }
    .hero-tag::before, .hero-tag::after { content: '//'; opacity: 0.4; }

    h1 {
      font-size: clamp(2.8rem, 7vw, 5.2rem);
      font-weight: 900; letter-spacing: -3px; line-height: 1.0;
      margin-bottom: 28px;
    }
    h1 .l1 { display: block; color: var(--text); }
    h1 .l2 {
      display: block;
      background: linear-gradient(135deg, var(--z8) 0%, var(--z6) 50%, var(--z7) 100%);
      -webkit-background-clip: text; -webkit-text-fill-color: transparent;
      filter: drop-shadow(0 0 30px rgba(168,85,247,0.4));
    }

    .hero-sub {
      font-size: 1.1rem; color: var(--muted);
      max-width: 600px; margin: 0 auto 44px; line-height: 1.8;
    }
    .hero-sub strong { color: var(--text); font-weight: 600; }

    .hero-cta {
      display: inline-flex; align-items: center; gap: 10px;
      background: transparent;
      border: 1px solid var(--z8);
      color: var(--z8); font-weight: 700; font-size: 0.95rem;
      padding: 16px 40px; border-radius: 4px; text-decoration: none;
      font-family: 'Space Mono', monospace; letter-spacing: 1px;
      position: relative; overflow: hidden;
      transition: color 0.3s, box-shadow 0.3s;
      box-shadow: 0 0 20px rgba(6,182,212,0.2), inset 0 0 20px rgba(6,182,212,0.05);
    }
    .hero-cta::before {
      content: '';
      position: absolute; inset: 0;
      background: linear-gradient(135deg, var(--z8), var(--z6));
      opacity: 0; transition: opacity 0.3s;
    }
    .hero-cta:hover { color: #fff; box-shadow: 0 0 40px rgba(6,182,212,0.5); }
    .hero-cta:hover::before { opacity: 1; }
    .hero-cta span { position: relative; z-index: 1; }

    /* â”€â”€ Counter â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
    .counter-wrap { text-align: center; padding: 8px 0 72px; }
    .counter {
      display: inline-flex; align-items: center; gap: 16px;
      border: 1px solid var(--border);
      background: rgba(0,212,255,0.03);
      border-radius: 4px; padding: 14px 32px;
    }
    .counter-label { font-family: 'Space Mono', monospace; font-size: 0.65rem; color: var(--muted); letter-spacing: 2px; }
    .counter-num {
      font-family: 'Space Mono', monospace;
      font-size: 2.2rem; font-weight: 700;
      background: linear-gradient(135deg, var(--z8), var(--z6));
      -webkit-background-clip: text; -webkit-text-fill-color: transparent;
      filter: drop-shadow(0 0 12px rgba(6,182,212,0.6));
    }

    /* â”€â”€ Divider â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
    .divider {
      height: 1px; margin-bottom: 80px;
      background: linear-gradient(90deg, transparent, var(--border), transparent);
    }

    /* â”€â”€ Section header â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
    .sec-tag {
      font-family: 'Space Mono', monospace;
      font-size: 0.65rem; letter-spacing: 3px; text-transform: uppercase;
      color: var(--muted); text-align: center; margin-bottom: 12px;
    }
    .sec-title {
      font-size: clamp(1.8rem, 4vw, 2.8rem);
      font-weight: 900; letter-spacing: -1.5px;
      text-align: center; margin-bottom: 14px;
    }
    .sec-sub {
      text-align: center; color: var(--muted); font-size: 0.97rem;
      max-width: 540px; margin: 0 auto 56px; line-height: 1.8;
    }

    /* â”€â”€ Zones legend â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
    .zones-legend {
      display: flex; flex-wrap: wrap; justify-content: center; gap: 10px;
      margin-bottom: 80px;
    }
    .zone-pill {
      display: flex; align-items: center; gap: 8px;
      border-radius: 4px; padding: 8px 16px;
      font-family: 'Space Mono', monospace;
      font-size: 0.7rem; letter-spacing: 1px;
      border: 1px solid;
      transition: transform 0.2s;
    }
    .zone-pill:hover { transform: translateY(-2px); }
    .zone-dot { width: 8px; height: 8px; border-radius: 50%; flex-shrink: 0; }

    /* â”€â”€ Cards â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
    .cards {
      display: grid; grid-template-columns: repeat(auto-fit, minmax(260px, 1fr));
      gap: 20px; margin-bottom: 90px;
    }
    .card {
      background: rgba(255,255,255,0.02);
      border-radius: 6px; padding: 32px 28px;
      position: relative; overflow: hidden;
      transition: transform 0.25s;
    }
    .card:hover { transform: translateY(-4px); }
    .card::before {
      content: '';
      position: absolute; top: 0; left: 0; right: 0; height: 2px;
    }
    /* Corner brackets */
    .card::after {
      content: '';
      position: absolute;
      bottom: 10px; right: 10px;
      width: 10px; height: 10px;
      border-right: 1px solid; border-bottom: 1px solid;
      opacity: 0.4;
    }
    .card-top-left {
      position: absolute; top: 10px; left: 10px;
      width: 10px; height: 10px;
      border-left: 1px solid; border-top: 1px solid; opacity: 0.4;
    }
    .card-icon { font-size: 1.8rem; margin-bottom: 16px; display: block; }
    .card-zone {
      font-family: 'Space Mono', monospace;
      font-size: 0.6rem; letter-spacing: 2px; text-transform: uppercase;
      margin-bottom: 10px;
    }
    .card h3 { font-size: 1rem; font-weight: 700; margin-bottom: 10px; }
    .card p  { font-size: 0.87rem; color: var(--muted); line-height: 1.7; }

    /* Card zone colors */
    .c1 { border:1px solid rgba(239,68,68,0.2);  } .c1::before{background:var(--z1);} .c1::after{border-color:var(--z1);} .c1 .card-top-left{border-color:var(--z1);}
    .c2 { border:1px solid rgba(249,115,22,0.2); } .c2::before{background:var(--z2);} .c2::after{border-color:var(--z2);} .c2 .card-top-left{border-color:var(--z2);}
    .c3 { border:1px solid rgba(234,179,8,0.2);  } .c3::before{background:var(--z3);} .c3::after{border-color:var(--z3);} .c3 .card-top-left{border-color:var(--z3);}
    .c4 { border:1px solid rgba(34,197,94,0.2);  } .c4::before{background:var(--z4);} .c4::after{border-color:var(--z4);} .c4 .card-top-left{border-color:var(--z4);}
    .c5 { border:1px solid rgba(59,130,246,0.2); } .c5::before{background:var(--z5);} .c5::after{border-color:var(--z5);} .c5 .card-top-left{border-color:var(--z5);}
    .c6 { border:1px solid rgba(168,85,247,0.2); } .c6::before{background:var(--z6);} .c6::after{border-color:var(--z6);} .c6 .card-top-left{border-color:var(--z6);}

    /* â”€â”€ Names wall â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
    .names-section { padding: 0 0 90px; }
    .names-grid {
      display: flex; flex-wrap: wrap; gap: 10px; justify-content: center;
      min-height: 60px;
    }
    .name-chip {
      display: flex; align-items: center; gap: 9px;
      border-radius: 4px; padding: 8px 16px;
      font-family: 'Space Mono', monospace; font-size: 0.78rem; letter-spacing: 1px;
      border: 1px solid; animation: chipIn 0.5s cubic-bezier(0.34,1.56,0.64,1);
    }
    @keyframes chipIn {
      from { transform: scale(0.6) translateY(10px); opacity: 0; }
      to   { transform: scale(1)   translateY(0);    opacity: 1; }
    }
    .chip-av {
      width: 24px; height: 24px; border-radius: 50%;
      display: flex; align-items: center; justify-content: center;
      font-size: 0.6rem; font-weight: 700; color: #fff; flex-shrink: 0;
    }
    .empty-state {
      text-align: center; color: var(--muted);
      font-family: 'Space Mono', monospace; font-size: 0.78rem;
      letter-spacing: 1px; padding: 28px; width: 100%;
    }

    /* â”€â”€ Form â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
    .form-section { padding: 0 0 100px; }
    .form-box {
      background: rgba(0,212,255,0.02);
      border: 1px solid var(--border);
      border-radius: 6px; padding: 52px 48px;
      position: relative;
    }
    .form-box::before {
      content: 'IDENTITY_VERIFICATION.exe';
      position: absolute; top: -10px; left: 24px;
      font-family: 'Space Mono', monospace; font-size: 0.65rem;
      color: var(--z8); background: var(--bg);
      padding: 0 10px; letter-spacing: 1px;
    }
    .form-box::after {
      content: '';
      position: absolute; top: 0; left: 0; right: 0; height: 1px;
      background: linear-gradient(90deg, transparent, var(--z8), var(--z6), transparent);
    }
    @media(max-width:600px){ .form-box{ padding:40px 20px; } }

    .form-sub { color: var(--muted); font-size: 0.9rem; margin-bottom: 40px; line-height: 1.8; }

    .field { margin-bottom: 26px; }
    label {
      display: block; font-family: 'Space Mono', monospace;
      font-size: 0.68rem; letter-spacing: 2px; text-transform: uppercase;
      color: var(--z8); margin-bottom: 10px;
    }
    label .hint { color: var(--muted); text-transform: none; letter-spacing: 0; font-family: 'Inter', sans-serif; font-size: 0.82rem; }

    input[type="text"],
    input[type="email"],
    textarea {
      width: 100%;
      background: rgba(0,212,255,0.03);
      border: 1px solid rgba(0,212,255,0.15);
      border-radius: 4px; padding: 14px 18px;
      color: var(--text);
      font-family: 'Space Mono', monospace; font-size: 0.85rem;
      transition: border-color 0.2s, box-shadow 0.2s; outline: none;
    }
    input:focus, textarea:focus {
      border-color: var(--z8);
      box-shadow: 0 0 0 3px rgba(6,182,212,0.1), 0 0 20px rgba(6,182,212,0.1);
    }
    textarea { resize: vertical; min-height: 100px; }

    .radio-group { display: flex; flex-direction: column; gap: 10px; }
    .radio-opt {
      display: flex; align-items: center; gap: 12px;
      background: rgba(0,212,255,0.02);
      border: 1px solid rgba(0,212,255,0.1);
      border-radius: 4px; padding: 13px 16px; cursor: pointer;
      font-size: 0.9rem;
      transition: border-color 0.2s, background 0.2s;
    }
    .radio-opt:hover { border-color: rgba(0,212,255,0.35); background: rgba(0,212,255,0.05); }
    .radio-opt input[type="radio"] { accent-color: var(--z8); width: 15px; height: 15px; flex-shrink:0; }

    .check-group { display: grid; grid-template-columns: 1fr 1fr 1fr; gap: 10px; }
    .check-group-7 { display: grid; grid-template-columns: repeat(7, 1fr); gap: 8px; }
    @media(max-width:600px) { .check-group-7 { grid-template-columns: repeat(4, 1fr); } }
    .check-opt {
      display: flex; align-items: center; gap: 10px;
      background: rgba(0,212,255,0.02);
      border: 1px solid rgba(0,212,255,0.1);
      border-radius: 4px; padding: 12px 14px; cursor: pointer;
      transition: border-color 0.2s, background 0.2s;
    }
    .check-opt:hover { border-color: rgba(0,212,255,0.35); background: rgba(0,212,255,0.05); }
    .check-opt input[type="checkbox"] { accent-color: var(--z8); width: 15px; height: 15px; flex-shrink:0; }
    .check-opt span { font-size: 0.87rem; }
    .check-group-7 .check-opt { flex-direction: column; gap: 6px; padding: 10px 6px; justify-content: center; text-align: center; }
    .check-group-7 .check-opt span { font-size: 0.75rem; }

    /* Color picker */
    .color-picker { display: flex; flex-wrap: wrap; gap: 16px; margin-top: 4px; }
    .swatch-item { display: flex; flex-direction: column; align-items: center; gap: 6px; }
    .swatch-nome { font-family: 'Space Mono', monospace; font-size: 0.6rem; letter-spacing: 0.3px; opacity: 0.75; text-align: center; }
    .color-swatch {
      width: 38px; height: 38px; border-radius: 50%; cursor: pointer;
      border: 2px solid transparent;
      transition: transform 0.2s, box-shadow 0.2s, border-color 0.2s;
    }
    .color-swatch:hover { transform: scale(1.15); }
    .color-swatch.selected {
      border-color: #fff;
      transform: scale(1.2);
      box-shadow: 0 0 16px var(--swatch-glow, rgba(255,255,255,0.5));
    }
    .cor-preview {
      display: none; align-items: center; gap: 10px;
      margin-top: 12px; font-family: 'Space Mono', monospace;
      font-size: 0.7rem; letter-spacing: 1px;
    }
    .cor-preview.on { display: flex; }
    .cor-preview-dot { width: 20px; height: 20px; border-radius: 50%; flex-shrink:0; }

    .zona-campo { display: none; }
    .zona-campo.visible { display: block; }

    .btn-submit {
      width: 100%; padding: 18px;
      background: transparent;
      border: 1px solid var(--z8);
      border-radius: 4px; color: var(--z8);
      font-family: 'Space Mono', monospace;
      font-size: 0.9rem; font-weight: 700; letter-spacing: 2px;
      cursor: pointer; margin-top: 12px;
      position: relative; overflow: hidden;
      transition: color 0.3s, box-shadow 0.3s;
      box-shadow: 0 0 20px rgba(6,182,212,0.15), inset 0 0 20px rgba(6,182,212,0.05);
    }
    .btn-submit::before {
      content: '';
      position: absolute; inset: 0;
      background: linear-gradient(135deg, var(--z8), var(--z6));
      opacity: 0; transition: opacity 0.3s;
    }
    .btn-submit:hover:not(:disabled) { color: #fff; box-shadow: 0 0 40px rgba(6,182,212,0.4); }
    .btn-submit:hover:not(:disabled)::before { opacity: 1; }
    .btn-submit span { position: relative; z-index: 1; }
    .btn-submit:disabled { opacity: 0.5; cursor: not-allowed; }

    /* â”€â”€ Success â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
    .success-box { display: none; text-align: center; padding: 60px 24px; }
    .success-box.on { display: block; }
    .success-icon { font-size: 3.5rem; margin-bottom: 20px; animation: zoomIn 0.5s; }
    @keyframes zoomIn { from{transform:scale(0)} to{transform:scale(1)} }
    .success-box h3 {
      font-family: 'Space Mono', monospace;
      font-size: 1.4rem; letter-spacing: 2px;
      background: linear-gradient(135deg, var(--z8), var(--z6));
      -webkit-background-clip: text; -webkit-text-fill-color: transparent;
      margin-bottom: 14px;
    }
    .success-box p { color: var(--muted); line-height: 1.8; }

    .err { color: #ef4444; font-family: 'Space Mono', monospace; font-size: 0.7rem; margin-top: 6px; letter-spacing: 1px; display: none; }
    .err.on { display: block; }

    .return-divider {
      display: flex; align-items: center; gap: 16px;
      margin: 36px 0 24px; color: var(--muted);
      font-family: 'Space Mono', monospace; font-size: 0.7rem; letter-spacing: 1px;
    }
    .return-divider::before, .return-divider::after { content: ''; flex: 1; height: 1px; background: var(--border); }

    /* â”€â”€ Countdown (congelado) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
    .countdown-box {
      border: 1px solid rgba(147,210,255,0.4); border-radius: 8px;
      padding: 24px 28px; margin-bottom: 48px;
      background: rgba(147,210,255,0.04);
      box-shadow: 0 0 40px rgba(147,210,255,0.15), 0 0 80px rgba(96,165,250,0.08);
      position: relative; overflow: hidden;
    }
    /* cristais de gelo nos cantos */
    .countdown-box::before, .countdown-box::after {
      content: 'â„'; position: absolute;
      font-size: 2.5rem; opacity: 0.15;
      animation: ice-drift 4s ease-in-out infinite;
    }
    .countdown-box::before { top: 6px; left: 10px; animation-delay: 0s; }
    .countdown-box::after  { bottom: 6px; right: 10px; animation-delay: 2s; }
    @keyframes ice-drift {
      0%,100% { opacity: 0.12; transform: scale(1) rotate(0deg); }
      50%      { opacity: 0.22; transform: scale(1.1) rotate(15deg); }
    }
    .cd-label {
      font-family: 'Space Mono', monospace; font-size: 0.7rem;
      letter-spacing: 2px; color: #93d2ff; margin-bottom: 16px;
    }
    .cd-timer { display: flex; align-items: center; gap: 12px; }
    .cd-unit { display: flex; flex-direction: column; align-items: center; gap: 4px; min-width: 60px; }
    .cd-unit span {
      font-family: 'Space Mono', monospace; font-size: clamp(1.8rem, 5vw, 2.8rem);
      font-weight: 700; color: #93d2ff; line-height: 1;
      text-shadow: 0 0 18px rgba(147,210,255,0.6), 0 0 40px rgba(96,165,250,0.3);
    }
    .cd-unit small { font-family: 'Space Mono', monospace; font-size: 0.6rem; color: #93d2ff; letter-spacing: 2px; opacity: 0.6; }
    .cd-frozen-msg {
      font-size: 0.78rem; color: rgba(147,210,255,0.6);
      margin-top: 14px; font-style: italic; letter-spacing: 0.5px;
    }
    .cd-sep { font-family: 'Space Mono', monospace; font-size: 2rem; color: #ef4444; opacity: 0.5; align-self: flex-start; padding-top: 4px; }

    /* Alarm effect */
    @keyframes alarm-pulse { 0%,100%{background:var(--bg)} 50%{background:rgba(239,68,68,0.12)} }
    @keyframes alarm-green { 0%,100%{background:var(--bg)} 50%{background:rgba(34,197,94,0.12)} }
    .alarm-on  { animation: alarm-pulse 0.5s ease-in-out 6; }
    .alarm-end { animation: alarm-green 1s ease-in-out 3; }

    .fabrica-online {
      display: none; text-align: center; padding: 40px 24px;
      border: 1px solid var(--z4); border-radius: 8px;
      background: rgba(34,197,94,0.06); margin-bottom: 48px;
    }
    .fabrica-online.on { display: block; }
    .fabrica-online h2 {
      font-family: 'Space Mono', monospace; font-size: clamp(1rem, 3vw, 1.6rem);
      letter-spacing: 3px; color: var(--z4); margin-bottom: 10px;
    }
    .fabrica-online p { color: var(--muted); font-size: 0.9rem; }

    /* â”€â”€ Chat Section â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
    #chat-section { display: none; padding: 80px 0 0; }
    .chat-intro { margin-bottom: 48px; }

    .cat-legend {
      display: grid; grid-template-columns: 1fr 1fr; gap: 10px; margin: 28px 0;
    }
    @media(max-width:600px) { .cat-legend { grid-template-columns: 1fr; } }
    .cat-legend-item {
      display: flex; align-items: flex-start; gap: 12px;
      background: rgba(0,212,255,0.03); border: 1px solid var(--border);
      border-radius: 6px; padding: 14px 16px;
    }
    .cat-legend-icon { font-size: 1.3rem; flex-shrink: 0; }
    .cat-legend-name { font-family: 'Space Mono', monospace; font-size: 0.72rem; letter-spacing: 1px; color: var(--z8); margin-bottom: 4px; }
    .cat-legend-desc { font-size: 0.8rem; color: var(--muted); line-height: 1.5; }

    .how-to-box {
      background: rgba(168,85,247,0.06); border: 1px solid rgba(168,85,247,0.2);
      border-radius: 6px; padding: 20px 24px; margin-top: 8px;
    }
    .how-to-box h4 { font-family: 'Space Mono', monospace; font-size: 0.78rem; color: var(--z6); letter-spacing: 1px; margin-bottom: 12px; }
    .how-to-box ol { padding-left: 18px; }
    .how-to-box li { font-size: 0.84rem; color: var(--muted); line-height: 2; }
    .how-to-box strong { color: var(--text); }

    .cat-tabs { display: flex; flex-wrap: wrap; gap: 8px; margin-bottom: 20px; }
    .cat-tab {
      font-family: 'Space Mono', monospace; font-size: 0.68rem; letter-spacing: 1px;
      padding: 8px 14px; border-radius: 4px;
      border: 1px solid var(--border); background: transparent; color: var(--muted);
      cursor: pointer; transition: all 0.2s;
    }
    .cat-tab:hover { border-color: rgba(0,212,255,0.3); color: var(--text); }
    .cat-tab.active { border-color: var(--z8); color: var(--z8); background: rgba(6,182,212,0.08); box-shadow: 0 0 12px rgba(6,182,212,0.15); }

    .chat-tz-bar {
      font-family: 'Space Mono', monospace; font-size: 0.68rem;
      color: var(--muted); margin-bottom: 10px; padding: 6px 10px;
      border: 1px solid var(--border); border-radius: 6px;
      background: rgba(0,212,255,0.03);
    }
    .chat-tz-bar strong { color: var(--text); }
    #relogio-local { color: #06b6d4; font-weight: 700; }

    .chat-ui { display: grid; grid-template-columns: 1fr 290px; gap: 20px; align-items: start; }
    @media(max-width:768px) { .chat-ui { grid-template-columns: 1fr; } }

    .chat-main { background: rgba(0,212,255,0.03); border: 1px solid var(--border); border-radius: 8px; overflow: hidden; }
    .messages-feed {
      height: 420px; overflow-y: auto; padding: 20px;
      display: flex; flex-direction: column; gap: 16px;
      scrollbar-width: thin; scrollbar-color: rgba(0,212,255,0.2) transparent;
    }
    .msg-empty { text-align: center; color: var(--muted); font-family: 'Space Mono', monospace; font-size: 0.72rem; letter-spacing: 1px; padding: 60px 0; }
    .msg { display: flex; gap: 12px; align-items: flex-start; }
    .msg-av {
      width: 34px; height: 34px; border-radius: 50%; flex-shrink: 0;
      display: flex; align-items: center; justify-content: center;
      font-size: 0.68rem; font-weight: 700; font-family: 'Space Mono', monospace; color: #000;
    }
    .msg-body { flex: 1; min-width: 0; }
    .msg-meta { display: flex; align-items: center; gap: 10px; margin-bottom: 5px; }
    .msg-name { font-family: 'Space Mono', monospace; font-size: 0.72rem; font-weight: 700; }
    .msg-time { font-size: 0.65rem; color: var(--muted); }
    .msg-text { font-size: 0.87rem; line-height: 1.65; color: var(--text); word-break: break-word; }
    .msg-actions { margin-top: 8px; }
    .btn-vote {
      background: transparent; border: 1px solid rgba(255,255,255,0.08);
      border-radius: 20px; padding: 4px 12px; cursor: pointer;
      font-size: 0.76rem; color: var(--muted); transition: all 0.2s;
      display: inline-flex; align-items: center; gap: 5px;
    }
    .btn-vote:hover { border-color: rgba(239,68,68,0.4); color: #ef4444; }
    .btn-vote.voted { border-color: rgba(239,68,68,0.5); color: #ef4444; background: rgba(239,68,68,0.08); cursor: default; }

    .reply-bar {
      display: none; align-items: center; gap: 10px;
      padding: 10px 16px; border-top: 1px solid var(--border);
      background: rgba(168,85,247,0.06);
    }
    .reply-bar.on { display: flex; }
    .reply-bar-text {
      flex: 1; font-size: 0.78rem; color: var(--muted);
      white-space: nowrap; overflow: hidden; text-overflow: ellipsis;
    }
    .reply-bar-text strong { color: var(--z6); font-family: 'Space Mono', monospace; font-size: 0.72rem; }
    .reply-bar-close {
      background: none; border: none; color: var(--muted);
      cursor: pointer; font-size: 1rem; line-height: 1; padding: 0 4px;
      flex-shrink: 0;
    }
    .reply-bar-close:hover { color: #ef4444; }

    .quoted-msg {
      border-left: 3px solid var(--z6); padding: 6px 10px;
      margin-bottom: 8px; border-radius: 0 4px 4px 0;
      background: rgba(168,85,247,0.06);
    }
    .quoted-nome { font-family: 'Space Mono', monospace; font-size: 0.68rem; color: var(--z6); margin-bottom: 3px; }
    .quoted-texto { font-size: 0.8rem; color: var(--muted); white-space: nowrap; overflow: hidden; text-overflow: ellipsis; }

    .btn-reply {
      background: none; border: none; color: var(--muted);
      cursor: pointer; font-size: 0.78rem; padding: 0 6px;
      transition: color 0.2s;
    }
    .btn-reply:hover { color: var(--z6); }

    .chat-input-row { display: flex; border-top: 1px solid var(--border); }
    .chat-input-row input {
      flex: 1; padding: 14px 16px;
      background: transparent; border: none; outline: none;
      color: var(--text); font-family: 'Inter', sans-serif; font-size: 0.87rem;
    }
    .chat-input-row input::placeholder { color: var(--muted); }
    .btn-send {
      padding: 14px 18px; background: transparent;
      border: none; border-left: 1px solid var(--border);
      color: var(--z8); font-family: 'Space Mono', monospace;
      font-size: 0.72rem; letter-spacing: 1px; cursor: pointer; transition: background 0.2s; white-space: nowrap;
    }
    .btn-send:hover { background: rgba(6,182,212,0.08); }

    .btn-emoji {
      padding: 14px 14px; background: transparent;
      border: none; border-left: 1px solid var(--border);
      font-size: 1.1rem; cursor: pointer; transition: background 0.2s;
      position: relative;
    }
    .btn-emoji:hover { background: rgba(6,182,212,0.08); }
    .emoji-picker {
      display: none; position: absolute; bottom: calc(100% + 6px); right: 0;
      background: #0d1f35; border: 1px solid var(--border);
      border-radius: 10px; padding: 10px; z-index: 999;
      display: grid; grid-template-columns: repeat(8, 1fr); gap: 2px;
      width: 280px; box-shadow: 0 8px 32px rgba(0,0,0,0.5);
    }
    .emoji-picker.hidden { display: none; }
    .emoji-btn {
      background: none; border: none; font-size: 1.3rem; cursor: pointer;
      padding: 5px; border-radius: 6px; transition: background 0.15s; line-height: 1;
    }
    .emoji-btn:hover { background: rgba(255,255,255,0.1); }

    .chat-sidebar { background: rgba(0,212,255,0.03); border: 1px solid var(--border); border-radius: 8px; padding: 20px; position: sticky; top: 20px; }
    .sidebar-title { font-family: 'Space Mono', monospace; font-size: 0.7rem; letter-spacing: 2px; color: var(--z3); margin-bottom: 16px; }
    .top-empty { color: var(--muted); font-size: 0.8rem; text-align: center; padding: 20px 0; }
    .top-item { display: flex; gap: 12px; align-items: flex-start; padding: 12px 0; border-bottom: 1px solid var(--border); }
    .top-item:last-child { border-bottom: none; }
    .top-fire { font-family: 'Space Mono', monospace; font-size: 0.75rem; color: #ef4444; min-width: 38px; padding-top: 2px; }
    .top-text { font-size: 0.82rem; line-height: 1.5; color: var(--text); }
    .top-author { font-size: 0.68rem; margin-top: 3px; }

    /* â”€â”€ Toast de erro â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
    #erro-toast {
      display: none; position: fixed; bottom: 24px; left: 50%; transform: translateX(-50%);
      background: #ef4444; color: #fff; padding: 10px 20px; border-radius: 8px;
      font-family: 'Space Mono', monospace; font-size: 0.78rem; z-index: 9999;
      box-shadow: 0 4px 20px rgba(239,68,68,0.4);
    }

    /* â”€â”€ Footer â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
    footer {
      text-align: center; padding: 40px 0;
      border-top: 1px solid var(--border);
      position: relative; z-index: 1;
    }
    footer p {
      font-family: 'Space Mono', monospace;
      font-size: 0.68rem; color: var(--muted); letter-spacing: 1px;
    }
    footer strong {
      background: linear-gradient(90deg, var(--z8), var(--z6));
      -webkit-background-clip: text; -webkit-text-fill-color: transparent;
    }

  </style>
</head>
<body>

<!-- Boot screen -->
<div id="boot">
  <div class="boot-logo">AIOXPHERE</div>
  <div class="boot-line" id="b1">// SYSTEM INITIALIZING...</div>
  <div class="boot-line" id="b2">// LOADING GENIUS ZONES... OK</div>
  <div class="boot-line" id="b3">// CONNECTING AIOXPHERE CORE... OK</div>
  <div class="boot-line" id="b4">// FACTORY STATUS: ONLINE âœ“</div>
  <div class="boot-bar"><div class="boot-progress" id="boot-bar"></div></div>
</div>

<!-- Prismatic orbs -->
<div class="orbs">
  <div class="orb orb-1"></div>
  <div class="orb orb-2"></div>
  <div class="orb orb-3"></div>
  <div class="orb orb-4"></div>
</div>

<div class="container">

  <!-- Nav -->
  <nav>
    <div class="logo">AIOXPHERE</div>
    <div class="sys-status">
      <span class="status-dot"></span>
      SISTEMA ONLINE
    </div>
  </nav>

  <!-- Hero -->
  <section class="hero">
    <div class="hero-scan"></div>
    <p class="hero-tag">A fÃ¡brica de execuÃ§Ã£o de Aiox</p>
    <h1>
      <span class="l1">VocÃª tem o talento.</span>
      <span class="l2">A gente tem a fÃ¡brica.</span>
    </h1>
    <p class="hero-sub">
      Uma legiÃ£o em execuÃ§Ã£o. Uma IA que executa tudo. Projetos saindo do papel em apenas um dia â€” Ã s vezes, em horas, atÃ© mesmo em alguns minutos.
      O <strong>AIOXPHERE</strong> Ã© a fÃ¡brica onde vocÃª entra com
      seu talento e sai com resultados reais â€” no seu tempo, no seu superpoder.
    </p>
    <a href="#formulario" class="hero-cta">
      <span>âš¡ ENTRAR NA FÃBRICA</span>
    </a>
  </section>

  <!-- Counter -->
  <div class="counter-wrap">
    <div class="counter hud">
      <div>
        <div class="counter-label">AGENTES ONLINE</div>
        <div class="counter-num" id="contador">000</div>
      </div>
    </div>
  </div>

  <div class="divider"></div>

  <!-- Zones legend -->
  <p class="sec-tag">// genius_zones.map</p>
  <h2 class="sec-title">Cada talento tem sua cor.</h2>
  <p class="sec-sub">A fÃ¡brica organiza os times pelo que cada pessoa realmente Ã© â€” nÃ£o pelo cargo que tem.</p>

  <div class="zones-legend">
    <div class="zone-pill" style="border-color:rgba(239,68,68,0.35);color:var(--z1);background:rgba(239,68,68,0.06)">
      <span class="zone-dot" style="background:var(--z1)"></span>ESTRATEGISTA
    </div>
    <div class="zone-pill" style="border-color:rgba(249,115,22,0.35);color:var(--z2);background:rgba(249,115,22,0.06)">
      <span class="zone-dot" style="background:var(--z2)"></span>CRIATIVO
    </div>
    <div class="zone-pill" style="border-color:rgba(234,179,8,0.35);color:var(--z3);background:rgba(234,179,8,0.06)">
      <span class="zone-dot" style="background:var(--z3)"></span>COMUNICADOR
    </div>
    <div class="zone-pill" style="border-color:rgba(34,197,94,0.35);color:var(--z4);background:rgba(34,197,94,0.06)">
      <span class="zone-dot" style="background:var(--z4)"></span>CONSTRUTOR
    </div>
    <div class="zone-pill" style="border-color:rgba(59,130,246,0.35);color:var(--z5);background:rgba(59,130,246,0.06)">
      <span class="zone-dot" style="background:var(--z5)"></span>ANALISTA
    </div>
    <div class="zone-pill" style="border-color:rgba(168,85,247,0.35);color:var(--z6);background:rgba(168,85,247,0.06)">
      <span class="zone-dot" style="background:var(--z6)"></span>VISIONÃRIO
    </div>
    <div class="zone-pill" style="border-color:rgba(236,72,153,0.35);color:var(--z7);background:rgba(236,72,153,0.06)">
      <span class="zone-dot" style="background:var(--z7)"></span>CONECTOR
    </div>
    <div class="zone-pill" style="border-color:rgba(6,182,212,0.35);color:var(--z8);background:rgba(6,182,212,0.06)">
      <span class="zone-dot" style="background:var(--z8)"></span>EXECUTOR
    </div>
  </div>

  <div class="divider"></div>

  <!-- Cards -->
  <p class="sec-tag">// factory.modules</p>
  <h2 class="sec-title">NÃ£o Ã© uma comunidade.<br/>Ã‰ uma mÃ¡quina de execuÃ§Ã£o.</h2>
  <p class="sec-sub">Cada mÃ³dulo da fÃ¡brica opera com sua zona de cor. Juntos formam o espectro completo.</p>

  <div class="cards">
    <div class="card c1 hud">
      <div class="card-top-left"></div>
      <span class="card-icon">ğŸ¤–</span>
      <div class="card-zone" style="color:var(--z1)">// mÃ³dulo 01</div>
      <h3>Seu agente particular</h3>
      <p>A IA conhece sua Zona de Genialidade e te coloca no projeto certo, na hora certa. Sem achismo. Sem politicagem.</p>
    </div>
    <div class="card c2 hud">
      <div class="card-top-left"></div>
      <span class="card-icon">ğŸ­</span>
      <div class="card-zone" style="color:var(--z2)">// mÃ³dulo 02</div>
      <h3>A fÃ¡brica nÃ£o para</h3>
      <p>AlguÃ©m sempre estÃ¡ construindo algo. VocÃª entra quando quiser e a mÃ¡quina jÃ¡ sabe exatamente onde vocÃª encaixa.</p>
    </div>
    <div class="card c3 hud">
      <div class="card-top-left"></div>
      <span class="card-icon">âš¡</span>
      <div class="card-zone" style="color:var(--z3)">// mÃ³dulo 03</div>
      <h3>ExecuÃ§Ã£o, nÃ£o papo</h3>
      <p>Chega de grupo no WhatsApp cheio de ideia e zero entrega. O AIOX delega, organiza e executa. VocÃª aparece e cresce.</p>
    </div>
    <div class="card c4 hud">
      <div class="card-top-left"></div>
      <span class="card-icon">ğŸ§¬</span>
      <div class="card-zone" style="color:var(--z4)">// mÃ³dulo 04</div>
      <h3>No seu superpoder</h3>
      <p>Times montados por habilidade real â€” nÃ£o por quem gritou mais alto. Cada pessoa brilha onde Ã© boa.</p>
    </div>
    <div class="card c5 hud">
      <div class="card-top-left"></div>
      <span class="card-icon">ğŸ´</span>
      <div class="card-zone" style="color:var(--z5)">// mÃ³dulo 05</div>
      <h3>Reconhecimento real</h3>
      <p>Figurinhas Ãºnicas, currÃ­culo automÃ¡tico e contribuiÃ§Ãµes visÃ­veis. Seu esforÃ§o nÃ£o passa em branco nunca mais.</p>
    </div>
    <div class="card c6 hud">
      <div class="card-top-left"></div>
      <span class="card-icon">ğŸš€</span>
      <div class="card-zone" style="color:var(--z6)">// mÃ³dulo 06</div>
      <h3>Hack Weekend</h3>
      <p>Desafios intensivos com contagem progressiva. Termine antes do prazo: âš¡ RelÃ¢mpago, ğŸš€ Foguete, ğŸ† LendÃ¡rio.</p>
    </div>
  </div>

  <div class="divider"></div>

  <!-- Names wall -->
  <section class="names-section">
    <p class="sec-tag">// agents.online</p>
    <h2 class="sec-title">Agentes conectados.</h2>
    <p class="sec-sub">Cada cor Ã© uma zona de genialidade. A fÃ¡brica cresce em tempo real.</p>
    <div class="names-grid" id="nomes-grid">
      <p class="empty-state">[ AGUARDANDO PRIMEIRO AGENTE... ]</p>
    </div>
  </section>

  <div class="divider"></div>

  <!-- Form -->
  <section class="form-section" id="formulario">
    <p class="sec-tag">// access_request.init</p>
    <h2 class="sec-title">Solicite acesso Ã  fÃ¡brica.</h2>
    <p class="sec-sub">Apenas agentes selecionados sÃ£o admitidos. Seus dados prÃ©-carregam seu perfil quando a plataforma abrir.</p>
    <br/>
    <div class="form-box">

      <div class="success-box" id="sucesso">
        <div class="success-icon">âš¡</div>
        <h3>// ACESSO CONCEDIDO</h3>
        <p>Seu nome jÃ¡ apareceu na lista de agentes.<br/>
        Em breve vocÃª receberÃ¡ o link de acesso.<br/>
        Seu agente jÃ¡ estÃ¡ preparando seu lugar na fÃ¡brica.</p>
      </div>

      <form id="form-inscricao">
        <p class="form-sub">
          Apenas pessoas selecionadas entram. Preencha abaixo â€” seus dados jÃ¡ vÃ£o
          prÃ©-carregar seu perfil quando a plataforma abrir. VocÃª nÃ£o vai precisar preencher nada de novo.
        </p>

        <div class="field">
          <label>NOME_COMPLETO <span style="color:var(--z2)">*</span></label>
          <input type="text" id="nome" placeholder="Seu nome completo" required />
          <div class="err" id="err-nome">// ERRO: campo obrigatÃ³rio</div>
        </div>

        <div class="field">
          <label>EMAIL_ID <span style="color:var(--z2)">*</span></label>
          <input type="email" id="email" placeholder="seu@email.com" required />
          <div class="err" id="err-email">// ERRO: email invÃ¡lido</div>
        </div>

        <div class="field">
          <label>GENIUS_ZONE_STATUS <span style="color:var(--z2)">*</span></label>
          <div class="radio-group" id="zona-radio">
            <label class="radio-opt">
              <input type="radio" name="tem_zona" value="sim" required />
              âœ… &nbsp;Sim â€” jÃ¡ tenho minha Zona de Genialidade
            </label>
            <label class="radio-opt">
              <input type="radio" name="tem_zona" value="nao" required />
              â³ &nbsp;Ainda nÃ£o â€” quero descobrir na plataforma
            </label>
          </div>
        </div>

        <div class="field">
          <label>SUA_COR <span class="hint"> &nbsp;â€” escolha a cor que mais combine com vocÃª no momento. Depois a gente passa o pente-fino.</span></label>
          <div class="color-picker" id="color-picker">
            <div class="swatch-item">
              <div class="color-swatch" data-cor="#ef4444" style="background:#ef4444"></div>
              <span class="swatch-nome" style="color:#ef4444">Estrategista</span>
            </div>
            <div class="swatch-item">
              <div class="color-swatch" data-cor="#f97316" style="background:#f97316"></div>
              <span class="swatch-nome" style="color:#f97316">Criativo</span>
            </div>
            <div class="swatch-item">
              <div class="color-swatch" data-cor="#eab308" style="background:#eab308"></div>
              <span class="swatch-nome" style="color:#eab308">Comunicador</span>
            </div>
            <div class="swatch-item">
              <div class="color-swatch" data-cor="#22c55e" style="background:#22c55e"></div>
              <span class="swatch-nome" style="color:#22c55e">Construtor</span>
            </div>
            <div class="swatch-item">
              <div class="color-swatch" data-cor="#3b82f6" style="background:#3b82f6"></div>
              <span class="swatch-nome" style="color:#3b82f6">Analista</span>
            </div>
            <div class="swatch-item">
              <div class="color-swatch" data-cor="#a855f7" style="background:#a855f7"></div>
              <span class="swatch-nome" style="color:#a855f7">VisionÃ¡rio</span>
            </div>
            <div class="swatch-item">
              <div class="color-swatch" data-cor="#ec4899" style="background:#ec4899"></div>
              <span class="swatch-nome" style="color:#ec4899">Conector</span>
            </div>
            <div class="swatch-item">
              <div class="color-swatch" data-cor="#06b6d4" style="background:#06b6d4"></div>
              <span class="swatch-nome" style="color:#06b6d4">Executor</span>
            </div>
          </div>
          <input type="hidden" id="cor_escolhida" value="" />
          <div class="cor-preview" id="cor-preview">
            <div class="cor-preview-dot" id="cor-preview-dot"></div>
            <span id="cor-preview-txt"></span>
          </div>
        </div>

        <div class="field">
          <label>PERÃODO_DO_DIA <span class="hint"> &nbsp;â€” preferÃªncia pessoal, sem compromisso</span></label>
          <div class="check-group">
            <label class="check-opt">
              <input type="checkbox" class="periodo" value="manha" />
              <span>ğŸŒ… ManhÃ£</span>
            </label>
            <label class="check-opt">
              <input type="checkbox" class="periodo" value="tarde" />
              <span>â˜€ï¸ Tarde</span>
            </label>
            <label class="check-opt">
              <input type="checkbox" class="periodo" value="noite" />
              <span>ğŸŒ™ Noite</span>
            </label>
          </div>
        </div>

        <div class="field">
          <label>DIAS_DA_SEMANA <span class="hint"> &nbsp;â€” preferÃªncia pessoal, sem compromisso</span></label>
          <div class="check-group-7">
            <label class="check-opt"><input type="checkbox" class="diasemana" value="seg" /><span>Seg</span></label>
            <label class="check-opt"><input type="checkbox" class="diasemana" value="ter" /><span>Ter</span></label>
            <label class="check-opt"><input type="checkbox" class="diasemana" value="qua" /><span>Qua</span></label>
            <label class="check-opt"><input type="checkbox" class="diasemana" value="qui" /><span>Qui</span></label>
            <label class="check-opt"><input type="checkbox" class="diasemana" value="sex" /><span>Sex</span></label>
            <label class="check-opt"><input type="checkbox" class="diasemana" value="sab" /><span>SÃ¡b</span></label>
            <label class="check-opt"><input type="checkbox" class="diasemana" value="dom" /><span>Dom</span></label>
          </div>
        </div>

        <button type="submit" class="btn-submit" id="btn-submit" disabled>
          <span id="btn-text">âš¡ SOLICITAR_ACESSO.exe</span>
        </button>
      </form>

      <div class="return-divider"><span>// jÃ¡ se inscreveu?</span></div>

      <div id="form-retorno">
        <p class="form-sub">Entre com o email que vocÃª usou no cadastro para acessar o chat da fÃ¡brica em qualquer aparelho.</p>
        <div class="field">
          <label>EMAIL_DE_RETORNO</label>
          <input type="email" id="email-retorno" placeholder="seu@email.com" />
          <div class="err" id="err-retorno">// Email nÃ£o encontrado. Verifique ou faÃ§a sua inscriÃ§Ã£o acima.</div>
        </div>
        <button type="button" class="btn-submit" id="btn-retorno" style="margin-top:8px">
          <span id="btn-retorno-text">ğŸ”‘ ENTRAR_NA_FÃBRICA.exe</span>
        </button>
      </div>

    </div>
  </section>


  <!-- â”€â”€ Chat Section â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ -->
  <section id="chat-section">

    <div class="divider"></div>

    <div class="chat-intro">
      <p class="sec-tag">// ideias.fabrica</p>
      <h2 class="sec-title">A fÃ¡brica Ã© construÃ­da por todos.</h2>
      <p class="sec-sub">Aqui vocÃª contribui com ideias para moldar como o AIOXPHERE vai funcionar. Cada voz importa â€” as ideias mais votadas sobem para o topo.</p>

      <div class="cat-legend">
        <div class="cat-legend-item">
          <span class="cat-legend-icon">ğŸ’¡</span>
          <div><div class="cat-legend-name">IDEIAS</div><div class="cat-legend-desc">SugestÃµes gerais que ainda nÃ£o tÃªm lugar certo. NÃ£o sabe onde encaixar? Coloca aqui.</div></div>
        </div>
        <div class="cat-legend-item">
          <span class="cat-legend-icon">ğŸ—ï¸</span>
          <div><div class="cat-legend-name">PRODUTO</div><div class="cat-legend-desc">O que construir, quais features criar, melhorias na plataforma.</div></div>
        </div>
        <div class="cat-legend-item">
          <span class="cat-legend-icon">ğŸ¨</span>
          <div><div class="cat-legend-name">DESIGN</div><div class="cat-legend-desc">Visual, identidade, experiÃªncia do usuÃ¡rio, como as coisas aparecem.</div></div>
        </div>
        <div class="cat-legend-item">
          <span class="cat-legend-icon">âš™ï¸</span>
          <div><div class="cat-legend-name">TECNOLOGIA</div><div class="cat-legend-desc">Ferramentas, cÃ³digo, infraestrutura, stack tÃ©cnica.</div></div>
        </div>
        <div class="cat-legend-item">
          <span class="cat-legend-icon">ğŸ¤</span>
          <div><div class="cat-legend-name">PESSOAS</div><div class="cat-legend-desc">Times, colaboraÃ§Ã£o, como nos organizamos e trabalhamos juntos.</div></div>
        </div>
        <div class="cat-legend-item">
          <span class="cat-legend-icon">ğŸ“£</span>
          <div><div class="cat-legend-name">MARKETING</div><div class="cat-legend-desc">DivulgaÃ§Ã£o, crescimento, como chegamos em mais gente.</div></div>
        </div>
        <div class="cat-legend-item">
          <span class="cat-legend-icon">ğŸ’°</span>
          <div><div class="cat-legend-name">FINANCEIRO</div><div class="cat-legend-desc">Custos, receita, pool de API, como a fÃ¡brica se sustenta.</div></div>
        </div>
        <div class="cat-legend-item">
          <span class="cat-legend-icon">ğŸ“‹</span>
          <div><div class="cat-legend-name">OPERAÃ‡Ã•ES</div><div class="cat-legend-desc">Processos, regras, como a fÃ¡brica funciona no dia a dia.</div></div>
        </div>
      </div>

      <div class="how-to-box">
        <h4>// COMO_USAR.md</h4>
        <ol>
          <li>Escolha a <strong>aba da categoria</strong> onde sua ideia se encaixa melhor</li>
          <li>Digite sua ideia no campo abaixo do chat e clique <strong>ENVIAR</strong></li>
          <li>Vote nas ideias que vocÃª acha genial clicando no <strong>ğŸ”¥</strong></li>
          <li>As mais votadas sobem automaticamente para o <strong>TOP IDEIAS</strong> na lateral</li>
          <li>VocÃª sÃ³ pode votar <strong>uma vez</strong> em cada ideia</li>
        </ol>
      </div>
    </div>

    <!-- Countdown congelado -->
    <div class="countdown-box hud" id="countdown-box">
      <div class="cd-label">â„ï¸ TEMPO_CONGELADO</div>
      <div style="font-family:'Space Mono',monospace; font-size:0.72rem; color:rgba(147,210,255,0.75); letter-spacing:1px; margin-bottom:18px;">
        Deadline: PRD_v1.0 â€” o blueprint completo do AIOXPHERE
      </div>
      <div class="cd-timer">
        <div class="cd-unit"><span>00</span><small>dias</small></div>
        <div class="cd-sep">:</div>
        <div class="cd-unit"><span>13</span><small>horas</small></div>
        <div class="cd-sep">:</div>
        <div class="cd-unit"><span>03</span><small>min</small></div>
        <div class="cd-sep">:</div>
        <div class="cd-unit"><span>38</span><small>seg</small></div>
      </div>
      <div class="cd-frozen-msg">
        Uma legiÃ£o de pessoas usando AIOX juntas no mesmo projeto causou uma dobra no espaÃ§o-tempo.
      </div>
    </div>

    <!-- FÃ¡brica online (aparece quando timer zera) -->
    <div class="fabrica-online" id="fabrica-online">
      <h2>// FÃBRICA ONLINE â€” MODO PRODUÃ‡ÃƒO ATIVADO</h2>
      <p>O PRD foi concluÃ­do. A prÃ³xima fase comeÃ§ou.</p>
    </div>

    <div class="cat-tabs">
      <button class="cat-tab active" data-cat="ideias">ğŸ’¡ Ideias</button>
      <button class="cat-tab" data-cat="produto">ğŸ—ï¸ Produto</button>
      <button class="cat-tab" data-cat="design">ğŸ¨ Design</button>
      <button class="cat-tab" data-cat="tecnologia">âš™ï¸ Tecnologia</button>
      <button class="cat-tab" data-cat="pessoas">ğŸ¤ Pessoas</button>
      <button class="cat-tab" data-cat="marketing">ğŸ“£ Marketing</button>
      <button class="cat-tab" data-cat="financeiro">ğŸ’° Financeiro</button>
      <button class="cat-tab" data-cat="operacoes">ğŸ“‹ OperaÃ§Ãµes</button>
    </div>

    <div class="chat-tz-bar">
      â± HorÃ¡rios no <strong>horÃ¡rio de BrasÃ­lia</strong> (BRT)
    </div>

    <div class="chat-ui">
      <div class="chat-main hud">
        <div class="messages-feed" id="messages-feed">
          <div class="msg-empty">[ AGUARDANDO PRIMEIRA IDEIA... ]</div>
        </div>
        <div class="reply-bar" id="reply-bar">
          <div class="reply-bar-text">â†© <strong id="reply-nome"></strong>: <span id="reply-texto"></span></div>
          <button class="reply-bar-close" id="reply-close">âœ•</button>
        </div>
        <div class="chat-input-row" style="position:relative">
          <input type="text" id="msg-input" placeholder="Digite sua ideia aqui..." />
          <button class="btn-emoji" id="btn-emoji" title="Emojis">ğŸ˜Š
            <div class="emoji-picker hidden" id="emoji-picker">
              ğŸ˜€ğŸ˜‚ğŸ¥¹ğŸ˜ğŸ¤©ğŸ˜ğŸ¥³ğŸ¤”ğŸ˜…ğŸ˜­ğŸ¤£ğŸ˜¤ğŸ«¡ğŸ¤¯ğŸ˜±ğŸ¥¶
              â¤ï¸ğŸ”¥ğŸ’¡ğŸš€âœ…ğŸ’ªğŸ™ŒğŸ‘ğŸ«¶ğŸ‘€ğŸ¯âš¡ğŸ§ ğŸ’»ğŸ› ï¸ğŸ“Œ
              ğŸ‰ğŸ™ğŸ¤ğŸ’¯ğŸ«‚ğŸŒŸğŸ’¥ğŸ®ğŸ†ğŸ§©ğŸ²ğŸ“¢ğŸ“£ğŸ””ğŸ’¬ğŸ—£ï¸
              ğŸ‘¾ğŸ¤–ğŸ¦¾ğŸ§¬ğŸŒğŸŒˆâ˜€ï¸ğŸŒ™â­ğŸ•ğŸµğŸ¶ğŸ¤ğŸ¸ğŸºğŸ¥
            </div>
          </button>
          <button class="btn-send" id="btn-send">ENVIAR âš¡</button>
        </div>
      </div>
      <div class="chat-sidebar hud">
        <div class="sidebar-title">ğŸ† TOP_IDEIAS</div>
        <div id="top-ideas"><p class="top-empty">Nenhum voto ainda.</p></div>
      </div>
    </div>

  </section>


</div>

<div id="erro-toast"></div>

<footer>
  <div class="container">
    <p>BUILT_BY: humanos + <strong>AIOX</strong> &nbsp;|&nbsp; AIOXPHERE Â© 2026 &nbsp;|&nbsp; STATUS: <span style="color:var(--z4)">ONLINE</span></p>
  </div>
</footer>

<script>
  // â”€â”€ Supabase â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  const SUPABASE_URL = 'https://igtaoywbhbousohwntlp.supabase.co';
  const SUPABASE_KEY = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImlndGFveXdiaGJvdXNvaHdudGxwIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NzIwNjcwMzMsImV4cCI6MjA4NzY0MzAzM30.AiIojwakkSISnNXfMALEU_STAHgSkyRzXWrTD61UF7A';
  const { createClient } = supabase;
  const db = createClient(SUPABASE_URL, SUPABASE_KEY);

  // Reset votos do localStorage via URL ?resetvotos
  if (window.location.search.includes('resetvotos')) {
    localStorage.removeItem('aios_votos');
    window.location.replace(window.location.pathname);
  }

  // â”€â”€ Cores das zonas â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  const zoneCores = ['#ef4444','#f97316','#eab308','#22c55e','#3b82f6','#a855f7','#ec4899','#06b6d4'];
  const coreNomes = {
    '#ef4444':'Vermelho', '#f97316':'Laranja', '#eab308':'Dourado',
    '#22c55e':'Verde',    '#3b82f6':'Azul',    '#a855f7':'Roxo',
    '#ec4899':'Rosa',     '#06b6d4':'Ciano'
  };

  function zonaCor(nome) {
    let h = 0;
    for (let c of nome) h = (h * 31 + c.charCodeAt(0)) & 0xffff;
    return zoneCores[h % zoneCores.length];
  }
  function iniciais(nome) {
    return nome.trim().split(' ').slice(0,2).map(n => n[0]).join('').toUpperCase();
  }
  function padNum(n) { return String(n).padStart(3, '0'); }

  // â”€â”€ Boot sequence â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  const bootLines = ['b1','b2','b3','b4'];
  let delay = 300;
  bootLines.forEach(id => {
    setTimeout(() => document.getElementById(id).classList.add('on'), delay);
    delay += 400;
  });
  setTimeout(() => {
    document.getElementById('boot-bar').style.width = '100%';
  }, 600);
  setTimeout(() => {
    document.getElementById('boot').classList.add('fade');
    setTimeout(() => document.getElementById('boot').style.display = 'none', 800);
  }, 2200);

  // â”€â”€ Nomes wall â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  const grid     = document.getElementById('nomes-grid');
  const contador = document.getElementById('contador');
  let total = 0;

  function adicionarNome(nome, cor = null) {
    const empty = grid.querySelector('.empty-state');
    if (empty) empty.remove();

    const c    = cor || zonaCor(nome);
    const chip = document.createElement('div');
    chip.className = 'name-chip';
    chip.style.cssText = `border-color:${c}44;background:${c}0d;color:${c}`;
    chip.innerHTML = `
      <div class="chip-av" style="background:${c}">${iniciais(nome)}</div>
      <span>${nome.split(' ')[0]}</span>
    `;
    grid.prepend(chip);
    total++;
    contador.textContent = padNum(total);
  }

  async function carregar() {
    const { data } = await db
      .from('inscricoes')
      .select('nome, created_at, cor_escolhida')
      .order('created_at', { ascending: true });
    if (data) data.forEach(r => adicionarNome(r.nome, r.cor_escolhida));
  }

  db.channel('inscricoes-live')
    .on('postgres_changes',
      { event: 'INSERT', schema: 'public', table: 'inscricoes' },
      p => adicionarNome(p.new.nome, p.new.cor_escolhida)
    ).subscribe();

  // â”€â”€ Zona toggle (apenas registra a escolha, sem caixa de texto) â”€â”€
  // (campo removido â€” apenas radio buttons)

  // â”€â”€ Color picker â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  document.querySelectorAll('.color-swatch').forEach(swatch => {
    swatch.addEventListener('click', () => {
      document.querySelectorAll('.color-swatch').forEach(s => s.classList.remove('selected'));
      swatch.classList.add('selected');
      const cor = swatch.dataset.cor;
      document.getElementById('cor_escolhida').value = cor;
      document.getElementById('cor-preview-dot').style.background = cor;
      document.getElementById('cor-preview-txt').textContent = '// Cor selecionada: ' + (coreNomes[cor] || cor);
      document.getElementById('cor-preview').classList.add('on');
    });
  });

  // â”€â”€ Habilita botÃ£o apÃ³s preencher nome e email â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  const btnSubmit = document.getElementById('btn-submit');
  ['nome','email'].forEach(id => {
    document.getElementById(id).addEventListener('input', () => {
      const nome  = document.getElementById('nome').value.trim();
      const email = document.getElementById('email').value.trim();
      btnSubmit.disabled = !(nome && email.includes('@'));
    });
  });

  // â”€â”€ Enviar â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  document.getElementById('form-inscricao').addEventListener('submit', async e => {
    e.preventDefault();

    const nome          = document.getElementById('nome').value.trim();
    const email         = document.getElementById('email').value.trim();
    const temZona       = document.querySelector('input[name="tem_zona"]:checked')?.value;
    const cor_escolhida = document.getElementById('cor_escolhida').value || null;
    const periodo_dia   = [...document.querySelectorAll('.periodo:checked')].map(el => el.value);
    const dias_semana   = [...document.querySelectorAll('.diasemana:checked')].map(el => el.value);

    let ok = true;
    if (!nome)  { document.getElementById('err-nome').classList.add('on');  ok = false; }
    else          document.getElementById('err-nome').classList.remove('on');
    if (!email || !email.includes('@')) { document.getElementById('err-email').classList.add('on'); ok = false; }
    else          document.getElementById('err-email').classList.remove('on');
    if (!ok) return;

    const btn  = document.getElementById('btn-submit');
    const text = document.getElementById('btn-text');
    btn.disabled = true;
    text.textContent = '// PROCESSANDO...';

    const { error } = await db.from('inscricoes').insert([{
      nome, email,
      tem_zona_genialidade: temZona === 'sim',
      cor_escolhida,
      periodo_dia: periodo_dia.length ? periodo_dia : null,
      dias_semana:  dias_semana.length  ? dias_semana  : null
    }]);

    if (error) {
      btn.disabled = false;
      text.textContent = 'âš¡ SOLICITAR_ACESSO.exe';
      if (error.code === '23505') {
        alert('// Este email jÃ¡ estÃ¡ registrado na fÃ¡brica! ğŸ‰');
      } else {
        alert('// ERRO: tente novamente em instantes.');
        console.error(error);
      }
      return;
    }

    document.getElementById('form-inscricao').style.display = 'none';
    document.getElementById('sucesso').classList.add('on');
    localStorage.setItem('aios_user', JSON.stringify({ nome, cor: cor_escolhida || '#06b6d4' }));
    setTimeout(() => mostrarChat(), 1200);
  });

  carregar();

  // â”€â”€ Countdown â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  const DEADLINE = new Date('2026-02-27T23:59:59-03:00');

  // Preview do efeito: acesse a URL com ?preview no final
  if (window.location.search.includes('preview')) {
    setTimeout(() => dispararAlarme(), 1500);
  }

  function pad(n) { return String(n).padStart(2, '0'); }

  function dispararAlarme() {
    document.getElementById('countdown-box').style.display = 'none';
    document.body.classList.add('alarm-on');
    setTimeout(() => {
      document.body.classList.remove('alarm-on');
      document.body.classList.add('alarm-end');
      document.getElementById('fabrica-online').classList.add('on');
      setTimeout(() => document.body.classList.remove('alarm-end'), 3000);
    }, 3000);
  }

  function atualizarCountdown() {
    const diff = DEADLINE - Date.now();
    if (diff <= 0) { dispararAlarme(); return; }
    const dias  = Math.floor(diff / 86400000);
    const horas = Math.floor((diff % 86400000) / 3600000);
    const min   = Math.floor((diff % 3600000) / 60000);
    const seg   = Math.floor((diff % 60000) / 1000);
    document.getElementById('cd-dias').textContent  = pad(dias);
    document.getElementById('cd-horas').textContent = pad(horas);
    document.getElementById('cd-min').textContent   = pad(min);
    document.getElementById('cd-seg').textContent   = pad(seg);
  }

  // Timer congelado â€” countdown desativado

  // â”€â”€ Chat â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  let catAtual = 'ideias';
  let chatChannel = null;

  function nomeUsuario() {
    const u = localStorage.getItem('aios_user');
    return u ? JSON.parse(u).nome : 'AnÃ´nimo';
  }
  function corUsuario() {
    const u = localStorage.getItem('aios_user');
    return u ? (JSON.parse(u).cor || '#06b6d4') : '#06b6d4';
  }
  function mostrarErro(msg) {
    const t = document.getElementById('erro-toast');
    t.textContent = msg; t.style.display = 'block';
    setTimeout(() => t.style.display = 'none', 5000);
  }

  function votosLocais() { return JSON.parse(localStorage.getItem('aios_votos') || '[]'); }
  function registrarVoto(id) {
    const v = votosLocais(); v.push(id);
    localStorage.setItem('aios_votos', JSON.stringify(v));
  }
  function jaVotou(id) { return votosLocais().includes(id); }

  const TZ = 'America/Sao_Paulo';

  function parseTS(ts) {
    if (!ts) return new Date(NaN);
    const s = String(ts).replace(' ', 'T');
    // Extrai partes: "2026-02-26T11:43:35.827325+00:00"
    const m = s.match(/^(\d{4})-(\d{2})-(\d{2})T(\d{2}):(\d{2}):(\d{2})/);
    if (!m) return new Date(NaN);
    // Offset do fuso no timestamp (ex: +00:00, -03:00, Z = +00:00)
    const tz = s.match(/([+-])(\d{2}):(\d{2})$/);
    const offsetMin = tz
      ? (tz[1] === '+' ? 1 : -1) * (parseInt(tz[2]) * 60 + parseInt(tz[3]))
      : 0; // sem fuso = assume UTC
    // Monta timestamp UTC corretamente
    const utcMs = Date.UTC(+m[1], +m[2]-1, +m[3], +m[4], +m[5], +m[6]) - offsetMin * 60000;
    return new Date(utcMs);
  }

  function tempoRelativo(ts) {
    const d = parseTS(ts);
    if (isNaN(d.getTime())) return '?';
    const agora = new Date();

    // BRT = UTC-3, calculado manualmente (sem depender do Intl do browser)
    const BRT = -3 * 3600000;
    const brt      = new Date(d.getTime()     + BRT);
    const brtAgora = new Date(agora.getTime() + BRT);

    const hh = String(brt.getUTCHours()).padStart(2,'0');
    const mm = String(brt.getUTCMinutes()).padStart(2,'0');
    const horaMin = hh + ':' + mm;

    const diaD     = brt.toISOString().slice(0,10);
    const diaHoje  = brtAgora.toISOString().slice(0,10);
    const diaOntem = new Date(brtAgora.getTime() - 86400000).toISOString().slice(0,10);

    if (diaD === diaHoje)  return horaMin;
    if (diaD === diaOntem) return 'ontem ' + horaMin;
    return brt.toISOString().slice(8,10) + '/' + brt.toISOString().slice(5,7) + ' ' + horaMin;
  }

  // Atualiza "agora" â†’ hora exata apÃ³s 1 minuto
  setInterval(() => {
    document.querySelectorAll('.msg-time[data-ts]').forEach(el => {
      el.textContent = tempoRelativo(el.dataset.ts);
    });
  }, 30000);

  function renderMsg(msg) {
    const div = document.createElement('div');
    div.className = 'msg';
    div.dataset.id = msg.id;
    const cor = msg.cor || '#06b6d4';
    const ini = msg.nome.trim().split(' ').slice(0,2).map(n => n[0]).join('').toUpperCase();
    // Se localStorage diz "votou" mas o banco tem 0 votos = voto fantasma, limpa
    if (jaVotou(msg.id) && (msg.votos || 0) === 0) {
      localStorage.setItem('aios_votos', JSON.stringify(votosLocais().filter(x => x !== String(msg.id))));
    }
    const voted   = jaVotou(msg.id);
    const proprio = msg.nome.trim().toLowerCase() === nomeUsuario().trim().toLowerCase();
    const quotedHtml = msg.reply_preview ? `
      <div class="quoted-msg">
        <div class="quoted-nome">â†© ${msg.reply_nome || ''}</div>
        <div class="quoted-texto">${msg.reply_preview}</div>
      </div>` : '';
    div.innerHTML = `
      <div class="msg-av" style="background:${cor}">${ini}</div>
      <div class="msg-body">
        <div class="msg-meta">
          <span class="msg-name" style="color:${cor}">${msg.nome.split(' ')[0]}</span>
          <span class="msg-time" data-ts="${msg.created_at}">${tempoRelativo(msg.created_at)}</span>
        </div>
        ${quotedHtml}
        <div class="msg-text">${msg.texto}</div>
        <div class="msg-actions">
          <button class="btn-vote ${(voted || proprio) ? 'voted' : ''}" data-id="${msg.id}" data-proprio="${proprio}" ${proprio ? 'title="VocÃª nÃ£o pode votar na prÃ³pria ideia" style="opacity:0.4;cursor:not-allowed"' : ''}>
            ğŸ”¥ <span class="voto-count">${msg.votos || 0}</span>
          </button>
          <button class="btn-reply" data-id="${msg.id}" data-nome="${msg.nome.split(' ')[0]}" data-texto="${msg.texto.substring(0,80).replace(/"/g,'&quot;').replace(/'/g,'&#39;')}">â†©</button>
        </div>
      </div>`;
    return div;
  }

  async function carregarMensagens(cat) {
    const feed = document.getElementById('messages-feed');
    feed.innerHTML = '<div class="msg-empty">[ CARREGANDO... ]</div>';
    ultimoTimestamp = null;
    const { data } = await db.from('mensagens').select('*').eq('categoria', cat).order('created_at', { ascending: true });
    feed.innerHTML = '';
    if (!data || data.length === 0) {
      feed.innerHTML = '<div class="msg-empty">[ AGUARDANDO PRIMEIRA IDEIA... ]</div>';
      ultimoTimestamp = new Date().toISOString();
      return;
    }
    data.forEach(msg => feed.appendChild(renderMsg(msg)));
    ultimoTimestamp = data[data.length - 1].created_at;
    feed.scrollTop = feed.scrollHeight;
  }

  async function carregarTop(cat) {
    const { data } = await db.from('mensagens').select('*').eq('categoria', cat).order('votos', { ascending: false }).limit(5);
    const el = document.getElementById('top-ideas');
    const itens = (data || []).filter(d => d.votos > 0);
    if (itens.length === 0) { el.innerHTML = '<p class="top-empty">Nenhum voto ainda.</p>'; return; }
    el.innerHTML = itens.map(d => `
      <div class="top-item">
        <div class="top-fire">ğŸ”¥${d.votos}</div>
        <div>
          <div class="top-text">${d.texto}</div>
          <div class="top-author" style="color:${d.cor||'#06b6d4'}">${d.nome.split(' ')[0]}</div>
        </div>
      </div>`).join('');
  }

  let pollInterval    = null;
  let ultimoTimestamp = null;
  let replyingTo      = null; // { id, nome, texto }

  function adicionarMsgNaFeed(msg) {
    const feed = document.getElementById('messages-feed');
    if (feed.querySelector(`[data-id="${msg.id}"]`)) return; // jÃ¡ existe
    const empty = feed.querySelector('.msg-empty');
    if (empty) empty.remove();
    feed.appendChild(renderMsg(msg));
    feed.scrollTop = feed.scrollHeight;
    ultimoTimestamp = msg.created_at;
  }

  function subscreverChat() {
    // â”€â”€ Realtime (entrega imediata) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    if (chatChannel) db.removeChannel(chatChannel);
    chatChannel = db.channel('mensagens-live-' + Date.now())
      .on('postgres_changes',
        { event: 'INSERT', schema: 'public', table: 'mensagens' },
        p => {
          if (p.new.categoria !== catAtual) return;
          adicionarMsgNaFeed(p.new);
          carregarTop(catAtual);
        }
      ).subscribe();

    // â”€â”€ Polling fallback a cada 3s (garante entrega) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    if (pollInterval) clearInterval(pollInterval);
    pollInterval = setInterval(async () => {
      if (!ultimoTimestamp) return;
      const { data } = await db
        .from('mensagens')
        .select('*')
        .eq('categoria', catAtual)
        .gt('created_at', ultimoTimestamp)
        .order('created_at', { ascending: true });
      if (data && data.length > 0) {
        data.forEach(msg => adicionarMsgNaFeed(msg));
        carregarTop(catAtual);
      }
    }, 3000);
  }

  async function votar(id, btn) {
    if (btn.classList.contains('voted') || btn.dataset.proprio === 'true') return;
    registrarVoto(id);
    btn.classList.add('voted');
    const countEl = btn.querySelector('.voto-count');
    const novoCount = (parseInt(countEl.textContent) || 0) + 1;
    countEl.textContent = novoCount;
    const { error } = await db
      .from('mensagens')
      .update({ votos: novoCount })
      .eq('id', id);
    if (error) {
      mostrarErro('ERRO: ' + (error.message || error.code || JSON.stringify(error)));
      const v = votosLocais().filter(x => x !== String(id));
      localStorage.setItem('aios_votos', JSON.stringify(v));
      btn.classList.remove('voted');
      countEl.textContent = novoCount - 1;
    } else {
      carregarTop(catAtual);
    }
  }

  async function enviarMensagem() {
    const input = document.getElementById('msg-input');
    const texto = input.value.trim();
    if (!texto) return;
    input.value = '';

    const payload = {
      nome: nomeUsuario(), cor: corUsuario(),
      categoria: catAtual, texto, votos: 0,
      created_at: new Date().toISOString(),
      reply_to:      replyingTo ? replyingTo.id      : null,
      reply_nome:    replyingTo ? replyingTo.nome     : null,
      reply_preview: replyingTo ? replyingTo.texto    : null,
    };

    replyingTo = null;
    document.getElementById('reply-bar').classList.remove('on');

    const { data } = await db.from('mensagens').insert([payload]).select().single();
    if (data) adicionarMsgNaFeed(data);
  }

  let chatListenersReady = false;
  function setupChatListeners() {
    if (chatListenersReady) return;
    chatListenersReady = true;
    document.getElementById('messages-feed').addEventListener('click', e => {
      const voteBtn = e.target.closest('.btn-vote');
      if (voteBtn) {
        const msgDiv = voteBtn.closest('[data-id]');
        if (msgDiv) votar(msgDiv.dataset.id, voteBtn);
        return;
      }
      const replyBtn = e.target.closest('.btn-reply');
      if (replyBtn) {
        replyingTo = { id: replyBtn.dataset.id, nome: replyBtn.dataset.nome, texto: replyBtn.dataset.texto };
        document.getElementById('reply-nome').textContent  = replyingTo.nome;
        document.getElementById('reply-texto').textContent = replyingTo.texto;
        document.getElementById('reply-bar').classList.add('on');
        document.getElementById('msg-input').focus();
      }
    });
  }

  function mostrarChat() {
    const s = document.getElementById('chat-section');
    s.style.display = 'block';
    setupChatListeners();
    carregarMensagens(catAtual);
    carregarTop(catAtual);
    subscreverChat();
    s.scrollIntoView({ behavior: 'smooth', block: 'start' });
  }

  document.querySelectorAll('.cat-tab').forEach(tab => {
    tab.addEventListener('click', () => {
      document.querySelectorAll('.cat-tab').forEach(t => t.classList.remove('active'));
      tab.classList.add('active');
      catAtual = tab.dataset.cat;
      carregarMensagens(catAtual);
      carregarTop(catAtual);
      subscreverChat();
    });
  });

  document.getElementById('btn-send').addEventListener('click', enviarMensagem);
  document.getElementById('msg-input').addEventListener('keydown', e => { if (e.key === 'Enter') enviarMensagem(); });

  // Emoji picker
  const emojiPicker = document.getElementById('emoji-picker');
  const btnEmoji    = document.getElementById('btn-emoji');
  const msgInput    = document.getElementById('msg-input');

  btnEmoji.addEventListener('click', e => {
    e.stopPropagation();
    emojiPicker.classList.toggle('hidden');
  });

  // Converte os emojis (texto) em botÃµes clicÃ¡veis
  const rawText = emojiPicker.textContent;
  emojiPicker.innerHTML = '';
  [...rawText.trim()].forEach(ch => {
    if (ch.trim() === '') return;
    const btn = document.createElement('button');
    btn.className = 'emoji-btn';
    btn.textContent = ch;
    btn.addEventListener('click', e => {
      e.stopPropagation();
      const start = msgInput.selectionStart;
      const end   = msgInput.selectionEnd;
      const val   = msgInput.value;
      msgInput.value = val.slice(0, start) + ch + val.slice(end);
      msgInput.selectionStart = msgInput.selectionEnd = start + ch.length;
      msgInput.focus();
      emojiPicker.classList.add('hidden');
    });
    emojiPicker.appendChild(btn);
  });

  // Fecha ao clicar fora
  document.addEventListener('click', () => emojiPicker.classList.add('hidden'));
  document.getElementById('reply-close').addEventListener('click', () => {
    replyingTo = null;
    document.getElementById('reply-bar').classList.remove('on');
  });

  // â”€â”€ Retorno por email â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  document.getElementById('btn-retorno').addEventListener('click', async () => {
    const emailRetorno = document.getElementById('email-retorno').value.trim();
    if (!emailRetorno || !emailRetorno.includes('@')) return;

    const btn  = document.getElementById('btn-retorno');
    const text = document.getElementById('btn-retorno-text');
    btn.disabled = true;
    text.textContent = '// VERIFICANDO...';

    const { data } = await db
      .from('inscricoes')
      .select('nome, cor_escolhida')
      .eq('email', emailRetorno)
      .maybeSingle();

    if (!data) {
      document.getElementById('err-retorno').classList.add('on');
      btn.disabled = false;
      text.textContent = 'ğŸ”‘ ENTRAR_NA_FÃBRICA.exe';
      return;
    }

    document.getElementById('err-retorno').classList.remove('on');
    localStorage.setItem('aios_user', JSON.stringify({ nome: data.nome, cor: data.cor_escolhida || '#06b6d4' }));
    mostrarChat();
  });

  document.getElementById('email-retorno').addEventListener('keydown', e => {
    if (e.key === 'Enter') document.getElementById('btn-retorno').click();
  });

  // Mostra chat se jÃ¡ se inscreveu antes
  if (localStorage.getItem('aios_user')) {
    document.getElementById('form-inscricao').style.display = 'none';
    document.getElementById('sucesso').classList.add('on');
    mostrarChat();
  }
</script>
</body>
</html>
